---
drake_cache: ".ui2"
---

## Materialise Framework

  * <https://materializecss.com/>

## Setup environment

  * Addins: Initiate drake -> `drake$source_plan()` -> `drake$makePlan()`.
  
  * `web$browse()` to see the output. 
  
  * If any change to Rmd, save the Rmd, then `drake$update()` -> `web$browser()` to see the change.
  
  * Your html output file is in `web$output_filepath()`.

```{r makecondition}
library(dplyr)
library(shiny)
library(htmltools)
library(econR)
.GlobalEnv$web <- econR::Web()
web$foldername="docs2" # output folder name
web$html_filename <- "index.html"

```

## =======================

### Input

```{r input_bins}
input_bins <- sliderInput("bins",
                        "Number of bins:",
                        min = 1,
                        max = 50,
                        value = 30)
```


### Output

```{r output_distPlot}
output_distPlot <- shiny::plotOutput("distPlot")
```

## =======================

### UI_body


```{r ui_body}
ui_body <-
  withTags(
    tagList(
      header(
        h3(class = "center-align", "Materialise UI: from ui2.Rmd")
      ),
      div(
        class = "container",
        div(
          class = "row",
          div(
            class = "col s4",
            input_bins
          ),
          div(
            class = "col s8",
            output_distPlot
          )
        )
      )
    )
  )

```

## ===============

## Dependencies


### Define dependency

```{r myDependency}
myDependency <- htmltools::htmlDependency(
  name="myown",
  version="1.0",
  src=c(filepath=web$cssJsPath),
  stylesheet = "css/mystyle.css",
  script = "js/mydesign.js",
  head = '<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+TC">')
```

  * If src is in other path, use `web$config_cssJsPath("your_path")` in **makecondition** -- no need to change `web$cssJsPath` (it will change accordingly).

## ==================

## Final UI

```{r ui}
ui <- 
  htmltools::tagList(
    ui_body,
    web$htmlDependencies$materialise(),
    web$htmlDependencies$jquery(),
    myDependency
  )
```

  * If not using jquery from htmlwidgets, replace `local_jquery` with `web$htmlDependencies$jquery()`


## Save

```{r save_ui}
.root <- rprojroot::is_rstudio_project$make_fix_file()
saveRDS(ui, file=file.path(.root(),"ui.RDS"))
```


```{r save_html}
htmltools::save_html(
  ui, 
  file = web$output_filepath(),
  libdir="lib"
)
```

## Browse

```{r}
web$browse()
```





## JS


<!--JS end-->
